<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Assignments</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Crim 250</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="Assignments.html">Assignments</a>
</li>
<li>
  <a href="Links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Assignments</h1>

</div>


<p>This page will contain all the assignments you submit for the class.</p>
<div id="assignment-1" class="section level1">
<h1>Assignment 1</h1>
<p><strong>Collaborators: Theodora Athanitis and Halle Wasser </strong></p>
<div id="problem-1" class="section level3">
<h3>Problem 1</h3>
<p>Install the datasets package on the console below using <code>install.packages("datasets")</code>. Now load the library.</p>
<pre class="r"><code># install.packages(&#39;datasets&#39;)
library(datasets)</code></pre>
<p><em>Answer: Installed!</em></p>
<p>Load the USArrests dataset and rename it <code>dat</code>. Note that this dataset comes with R, in the package datasets, so there’s no need to load data from your computer. Why is it useful to rename the dataset?</p>
<pre class="r"><code>dat &lt;- USArrests</code></pre>
<p>Answer: Renaming data sets ensures that you do not edit any of your original data on accident, and it is also easier to type.</p>
</div>
<div id="problem-2" class="section level3">
<h3>Problem 2</h3>
<p>Use this command to make the state names into a new variable called State.</p>
<pre class="r"><code>dat$state &lt;- tolower(rownames(USArrests))</code></pre>
<p>This dataset has the state names as row names, so we just want to make them into a new variable. We also make them all lower case, because that will help us draw a map later - the map function requires the states to be lower case.</p>
<p>List the variables contained in the dataset <code>USArrests</code>.</p>
<pre class="r"><code>names(dat)</code></pre>
<pre><code>## [1] &quot;Murder&quot;   &quot;Assault&quot;  &quot;UrbanPop&quot; &quot;Rape&quot;     &quot;state&quot;</code></pre>
<p><em>Answer: The variables are Murder, Assault, Urban Population, and Rape, in addition to the new variable that we just created, state.</em></p>
</div>
<div id="problem-3" class="section level3">
<h3>Problem 3</h3>
<p>What type of variable (from the DVB chapter) is <code>Murder</code>?</p>
<p><em>Answer: Murder is a quantitative variable according to the DVB chapter because we are measuring the amount of murder arrests per 100,000.</em></p>
<p>What R Type of variable is it?</p>
<pre class="r"><code>class(dat$Murder)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p><em>Answer: In R, the data points in the Murder column are numeric variables according to the class() function.</em></p>
</div>
<div id="problem-4" class="section level3">
<h3>Problem 4</h3>
<p>What information is contained in this data set, in general? What do the numbers mean?</p>
<pre class="r"><code>head(dat)</code></pre>
<pre><code>##            Murder Assault UrbanPop Rape      state
## Alabama      13.2     236       58 21.2    alabama
## Alaska       10.0     263       48 44.5     alaska
## Arizona       8.1     294       80 31.0    arizona
## Arkansas      8.8     190       50 19.5   arkansas
## California    9.0     276       91 40.6 california
## Colorado      7.9     204       78 38.7   colorado</code></pre>
<pre class="r"><code>`?`(USArrests)</code></pre>
<p><em>Answer: Generally, this data set contains rates for specific crime arrests per 100,000 people collected by D.R. McNeil, as well as percentages of urban population per state in 1973. The numbers in the Murder, Assault, and Rape columns are equivalent to the calculated arrest rates for Murder, Assault, and Rape. The Urban Population numbers are the percentages of the population in each state that live in an urban area.</em></p>
</div>
<div id="problem-5" class="section level3">
<h3>Problem 5</h3>
<p>Draw a histogram of <code>Murder</code> with proper labels and title.</p>
<pre class="r"><code>hist(dat$Murder, xlab = &quot;Murder Arrests per 100,000 People&quot;,
    main = &quot;Frequency of Murder Arrest Rates in the US&quot;, col = &quot;purple&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="problem-6" class="section level3">
<h3>Problem 6</h3>
<p>Please summarize <code>Murder</code> quantitatively. What are its mean and median? What is the difference between mean and median? What is a quartile, and why do you think R gives you the 1st Qu. and 3rd Qu.?</p>
<pre class="r"><code>summary(dat$Murder)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.800   4.075   7.250   7.788  11.250  17.400</code></pre>
<p><em>Answer: The mean is 7.788. The median is 7.250. Q1 is 4.075 and Q3 is 11.250. The minimum value is .800 and the maximum value is 17.400. Mean and median are both measures of center; however, the mean is the average value of a data set, which is calculated by adding all of the values and dividing by the number of total data points, and the mean is calculated by finding the middle value when the data set is arranged in order. A quartile is essentially the same as a median, but with 25% and 75% of the data, rather than 50%. This means that 25% of the data in a data set is below the 1st quartile, 50% is below the second quartile (the median), and 75% is below the 3rd quartile. R gives you quartiles in order to help visualize the data and see if it is distributed symmetrically, and only gives you quartiles 1 and 3 because the median is the 2nd quartile.</em></p>
</div>
<div id="problem-7" class="section level3">
<h3>Problem 7</h3>
<p>Repeat the same steps you followed for <code>Murder</code>, for the variables <code>Assault</code> and <code>Rape</code>. Now plot all three histograms together. You can do this by using the command <code>par(mfrow=c(3,1))</code> and then plotting each of the three.</p>
<pre class="r"><code>hist(dat$Assault, xlab = &quot;Assault Arrests per 100,000 People&quot;,
    main = &quot;Frequency of Assault Arrest Rates in the US&quot;, col = &quot;Blue&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-9-1.png" width="480" /></p>
<pre class="r"><code>summary(dat$Assault)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    45.0   109.0   159.0   170.8   249.0   337.0</code></pre>
<p><em>Answer: The mean is 170.8. The median is 159.0. Q1 is 109.0 and Q3 is 249.0. The minimum value is 45.0 and the maximum value is 337.0.</em></p>
<pre class="r"><code>hist(dat$Rape, xlab = &quot;Rape Arrests per 100,000 People&quot;, main = &quot;Frequency of Rape Arrest Rates in the US&quot;,
    col = &quot;Red&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<pre class="r"><code>summary(dat$Rape)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    7.30   15.07   20.10   21.23   26.18   46.00</code></pre>
<p><em>Answer: The mean is 21.23. The median is 20.10. Q1 is 15.07 and Q3 is 26.18. The minimum value is 7.30 and the maximum value is 46.00.</em></p>
<pre class="r"><code>par(mfrow = c(3, 1))
hist(dat$Murder, xlab = &quot;Murder Arrests per 100,000 People&quot;,
    main = &quot;Frequency of Murder Arrest Rates in the US&quot;, col = &quot;purple&quot;)
hist(dat$Assault, xlab = &quot;Assault Arrests per 100,000 People&quot;,
    main = &quot;Frequency of Assault Arrest Rates in the US&quot;, col = &quot;Blue&quot;)
hist(dat$Rape, xlab = &quot;Rape Arrests per 100,000 People&quot;, main = &quot;Frequency of Rape Arrest Rates in the US&quot;,
    col = &quot;Red&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-13-1.png" width="480" /></p>
<p>What does the command par do, in your own words (you can look this up by asking R <code>?par</code>)?</p>
<p><em>Answer: The ‘par’ command sets parameters for graphs, changes how they are displayed, and allows us to tell R to compare additional variables within the data set. ‘mfrow’ puts things in an array, and the parameters of (1,3) tell it to display them stacked on top of each other, rather than side by side or otherwise.</em></p>
<p>What can you learn from plotting the histograms together?</p>
<p><em>Answer: We can learn that assault arrest rates per 100,000 people are far higher than the arrest rates for murder and rape by comparing the x axis of all three histograms. Additionally, while the frequency of arrest rates for rape and murder skew relatively right and are unimodal, the frequency of assault arrest rates is bimodal. Comparing and plotting them together can generally help us visually compare distributions overall.</em></p>
</div>
<div id="problem-8" class="section level3">
<h3>Problem 8</h3>
<p>In the console below (not in text), type <code>install.packages("maps")</code> and press Enter, and then type <code>install.packages("ggplot2")</code> and press Enter. This will install the packages so you can load the libraries.</p>
<p>Run this code:</p>
<pre class="r"><code># install.packages(&#39;maps&#39;) install.packages(&#39;ggplot2&#39;)
library(&quot;maps&quot;)
library(&quot;ggplot2&quot;)

ggplot(dat, aes(map_id = state, fill = Murder)) + geom_map(map = map_data(&quot;state&quot;)) +
    expand_limits(x = map_data(&quot;state&quot;)$long, y = map_data(&quot;state&quot;)$lat)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-14-1.png" width="720" /></p>
<p>What does this code do? Explain what each line is doing.</p>
<p><em>Answer:</em></p>
<pre class="r"><code># install.packages(&#39;maps&#39;)
#- This line installs a package that allows for map-drawing based on state names provided within the data.
# install.packages(&#39;ggplot2&#39;)
#- This line installs a package that makes improves the data visualization so that the map is easier to understand.
# library(&#39;maps&#39;)
#- This line tells R where to find the package to help draw the map
# library(&#39;ggplot2&#39;)
#- This line tells R where to find the package to help draw the map
# ggplot(dat, aes(map_id=state, fill=Murder)) +
# geom_map(map=map_data(&#39;state&#39;)) +
# expand_limits(x=map_data(&#39;state&#39;)$long,
# y=map_data(&#39;state&#39;)$lat)
#- This line tells R to use ggplot and to take information from dat variable &#39;state&#39;, and then to draw a map with US states, specifically using numbers from the Murder column. This line also instructs R to color each state based on the numbers in the &#39;Murder&#39; column. It additionally tells R to make the x and y axes and limits align with longitude and latitude in a US map.</code></pre>
</div>
</div>
<div id="assignment-2" class="section level1">
<h1>Assignment 2</h1>
<p><strong>Collaborators: Theodora Athanitis</strong></p>
<div id="problem-1-1" class="section level3">
<h3>Problem 1</h3>
<p><em>Instructions: Copy your code, paste it into a Word document, and turn it into Canvas. You can turn in a .docx or .pdf file. Show any EDA (graphical or non-graphical) you have used to come to this conclusion.</em></p>
<p>Problem 1: Load data</p>
<p>Set your working directory to the folder where you downloaded the data.</p>
<pre class="r"><code>setwd(&quot;/Users/toriborlase/Desktop/University of Pennsylvania/Fall 2021/CRIM 250/Tori-Borlase-Crim-250&quot;)</code></pre>
<p>Read the data</p>
<pre class="r"><code>dat &lt;- read.csv(file = &quot;dat.nsduh.small.1.csv&quot;)</code></pre>
<p>What are the dimensions of the dataset?</p>
<pre class="r"><code>dim(dat)</code></pre>
<pre><code>## [1] 171   7</code></pre>
<p>Answer: 171 by 7. 171 rows and 7 columns.</p>
</div>
<div id="problem-2-variables" class="section level3">
<h3>Problem 2: Variables</h3>
<p>Describe the variables in the dataset.</p>
<pre class="r"><code>names(dat)</code></pre>
<pre><code>## [1] &quot;mjage&quot;     &quot;cigage&quot;    &quot;iralcage&quot;  &quot;age2&quot;      &quot;sexatract&quot; &quot;speakengl&quot;
## [7] &quot;irsex&quot;</code></pre>
<p><em>Answer: The variables in the dataset are mjage, cigage, iralcage, age2, sexatract, speakengl, and irsex. According to the code book, these correspond to how old someone was when they first tried marijuana or hashish, how old someone was when they started smoking cigarettes every day, how old someone was when they first tried alcohol, the final age that someone was determined to be at the time of taking the survey (which was asked multiple times as a consistency check), which statement about sexual orientation best described the respondent’s feelings, how well they speak English, and imputation revised gender.</em></p>
<p>What is this dataset about? Who collected the data, what kind of sample is it, and what was the purpose of generating the data?</p>
<p><em>Answer: This dataset is from the 2019 National Survey on Drug Use and Health (NSDUH). Individuals within the Center for Behavioral Health Statistics and Quality collected this data in order to measure the “prevalence and correlates of substance use and mental health issues” in the US. This was a stratified random sample, as they collected data in all 50 states for civilian and non-institutionalized populations.</em></p>
</div>
<div id="problem-3-age-and-gender" class="section level2">
<h2>Problem 3: Age and gender</h2>
<p>What is the age distribution of the sample like? Make sure you read the codebook to know what the variable values mean.</p>
<pre class="r"><code>counts &lt;- table(dat$age2)
barplot(counts, main = &quot;Histogram of Ages of Participants&quot;, xlab = &quot;Age Category&quot;,
    ylab = &quot;Frequency&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p><em>Answer: The age distribution of this sample is skewed left. However, because the numbers within the data set are not actual ages, but rather a range of ages or individual ages that are coded as numbers 1 through 17, we cannot base our true age distribution off of the numbers that form the labels of the histogram. While it appears that the Final Edited Age is skewed left, this may just be because the upper coded ages contain wider ranges of ages, and the lower coded ages contain only one or two ages.</em></p>
<p>Do you think this age distribution representative of the US population? Why or why not?</p>
<p><em>Answer: No, I do not believe this age distribution is representative of the US population. According to Census data, and other population pyramids that display the distribution of population, there are many more younger people than are represented in this graph, as well as many individuals outside of the scope of the study, such as those under 12, etc. Even though (as I mentioned before) there are multiple ages within certain categories, this data shows many more older individuals compared to teenagers and those in their early twenties, and Census data shows large numbers of those populations.</em></p>
<p>Is the sample balanced in terms of gender? If not, are there more females or males?</p>
<pre class="r"><code>table(dat$irsex)</code></pre>
<pre><code>## 
##  1  2 
## 91 80</code></pre>
<p>1 (Male) 2 (Female) 91 80</p>
<pre class="r"><code>counts &lt;- table(dat$irsex)
barplot(counts, main = &quot;Gender Distribution&quot;, xlab = &quot;Gender&quot;,
    ylab = &quot;Frequency&quot;, names = c(&quot;Male&quot;, &quot;Female&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p><em>Answer: The sample is not gender balanced, as there are more males (91) than females (80). Using a bar chart clearly demonstrates this disparity.</em></p>
<p>Use this code to draw a stacked bar plot to view the relationship between sex and age. What can you conclude from this plot?</p>
<pre class="r"><code>tab.agesex &lt;- table(dat$irsex, dat$age2)
barplot(tab.agesex, main = &quot;Age and Gender Comparison&quot;, xlab = &quot;Age Category&quot;,
    ylab = &quot;Frequency&quot;, legend.text = c(&quot;Male&quot;, &quot;Female&quot;), xlim = c(0,
        17), beside = FALSE)  # Stacked bars (default)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p><em>Answer: We can conclude from this plot that for most age categories, there were more males than females. However, for age categories 8, 9, 13, and 15, there appear to be more females or the same number of males and females.</em></p>
</div>
<div id="problem-4-substance-use" class="section level2">
<h2>Problem 4: Substance use</h2>
<p>For which of the three substances included in the data set (marijuana, alcohol, and cigarettes) do individuals tend to use the substance earlier?</p>
<pre class="r"><code>par(mfrow = c(3, 1))
hist(dat$mjage, main = &quot;Histogram of Age of First Marijuana Use&quot;,
    xlab = &quot;Age Categories&quot;, ylab = &quot;Frequency&quot;, xlim = c(0,
        50), ylim = c(0, 50), breaks = 20)
hist(dat$iralcage, main = &quot;Histogram of Age of First Alcohol Use&quot;,
    xlab = &quot;Age Categories&quot;, ylab = &quot;Frequency&quot;, xlim = c(0,
        50), ylim = c(0, 50), breaks = 20)
hist(dat$cigage, main = &quot;Histogram of Age of Starting to Smoke Cigarettes Daily&quot;,
    xlab = &quot;Age Categories&quot;, ylab = &quot;Frequency&quot;, xlim = c(0,
        50), ylim = c(0, 50), breaks = 20)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p><em>Individuals tend to use alcohol earlier, as seen on the histograms.</em></p>
</div>
<div id="problem-5-sexual-attraction" class="section level2">
<h2>Problem 5: Sexual attraction</h2>
<p>What does the distribution of sexual attraction look like? Is this what you expected?</p>
<pre class="r"><code>dat1 &lt;- dat[dat$sexatract != 99, ]
counts1 &lt;- table(dat1$sexatract)
barplot(counts1, main = &quot;Sexual Attraction Distribution&quot;, xlab = &quot;Sexual Attraction Categories&quot;,
    ylab = &quot;Frequency&quot;, ylim = c(0, 150))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p><em>Answer: The distribution of sexual attraction is skewed right, which is what I expected, as most people identify as only being attracted to the opposite sex, with fewer people identifying as being attracted to the same sex in any way. This is what I expected because I believe that LGBT+ populations are still a relatively small minority within the US compared to those who are only attracted to the opposite sex.</em></p>
<p>What is the distribution of sexual attraction by gender?</p>
<pre class="r"><code>dat1 &lt;- dat[dat$sexatract != 99, ]
tab.sexor &lt;- table(dat1$irsex, dat1$sexatract)
barplot(tab.sexor, main = &quot;Sexual Attraction and Gender Comparison&quot;,
    xlab = &quot;Sexual Attraction Category&quot;, ylab = &quot;Frequency&quot;,
    legend.text = c(&quot;Male&quot;, &quot;Female&quot;), xlim = c(0, 7), ylim = c(0,
        140), beside = FALSE)  # Stacked bars (default)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p><em>The distribution by gender is also skewed right, but there are more females that identify with statements about being attracted to the same sex in some way, and more males that identify with statements about being attracted to the opposite sex, as can be seen in the stacked bar chart.</em></p>
</div>
<div id="problem-6-english-speaking" class="section level2">
<h2>Problem 6: English speaking</h2>
<p>What does the distribution of English speaking look like in the sample? Is this what you might expect for a random sample of the US population?</p>
<pre class="r"><code>counts2 &lt;- table(dat$speakengl)
barplot(counts2, main = &quot;English Language Category Frequency&quot;,
    xlab = &quot;English Speaking Categories&quot;, ylab = &quot;Frequency&quot;,
    ylim = c(0, 200))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p><em>This distribution is also skewed right, with most individuals responding that they speak English very well, and less than 50 individuals total saying that the speak English well or not well, and nobody saying they did not speak English at all. This is similar to the distribution that I would expect in the United States because even though the US has no official language, most people need to speak some English in order to work and live here. However, there are probably more people in the US that speak no English at all, but they just were not able to participate in the survey because it was conducted in English.</em></p>
<p>Are there more English speaker females or males?</p>
<pre class="r"><code>table(dat$irsex, dat$speakengl)</code></pre>
<pre><code>##    
##      1  2  3
##   1 84  7  0
##   2 77  1  2</code></pre>
<pre class="r"><code>tab.sexor &lt;- table(dat$irsex, dat$speakengl)
barplot(tab.sexor, main = &quot;English Skill and Gender Comparison&quot;,
    xlab = &quot;English Ability Category&quot;, ylab = &quot;Frequency&quot;, legend.text = c(&quot;Male&quot;,
        &quot;Female&quot;), xlim = c(0, 4), ylim = c(0, 200), beside = FALSE)  # Stacked bars (default)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p><em>There are more male English speakers than female English speakers, but that might also be due to the fact that there are more males than females within the data set to begin with.</em></p>
</div>
</div>
<div id="exam-1" class="section level1">
<h1>Exam 1</h1>
<p>Instructions</p>
<ol style="list-style-type: lower-alpha">
<li><p>Create a folder in your computer (a good place would be under Crim 250, Exams).</p></li>
<li><p>Download the dataset from the Canvas website (fatal-police-shootings-data.csv) onto that folder, and save your Exam 1.Rmd file in the same folder.</p></li>
<li><p>Download the README.md file. This is the codebook.</p></li>
<li><p>Load the data into an R data frame.</p></li>
</ol>
<pre class="r"><code>setwd(&quot;/Users/toriborlase/Desktop/University of Pennsylvania/Fall 2021/CRIM 250/Tori-Borlase-Crim-250&quot;)
dat &lt;- read.csv(file = &quot;fatal-police-shootings-data.csv&quot;)</code></pre>
<div id="problem-1-10-points" class="section level3">
<h3>Problem 1 (10 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>Describe the dataset. This is the source: <a href="https://github.com/washingtonpost/data-police-shootings" class="uri">https://github.com/washingtonpost/data-police-shootings</a> . Write two sentences (max.) about this.</li>
</ol>
<p><em>This dataset was collected by the Washington Post and contains records of every fatal shooting by a police officer in the U.S. since January 1, 2015. The data includes names, dates, manner of death, if that individual was armed, their age, gender, race, location, as well as other general factors, and an ID number of each individual who was victimized according to the criteria established by the Washington Post.</em></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>How many observations are there in the data frame?</li>
</ol>
<pre class="r"><code>dim(dat)</code></pre>
<pre><code>## [1] 6594   17</code></pre>
<p><em>There are 6594 observations in the data set, as well as 17 variables.</em></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Look at the names of the variables in the data frame. Describe what “body_camera”, “flee”, and “armed” represent, according to the codebook. Again, only write one sentence (max) per variable.</li>
</ol>
<pre class="r"><code>names(dat)</code></pre>
<pre><code>##  [1] &quot;id&quot;                      &quot;name&quot;                   
##  [3] &quot;date&quot;                    &quot;manner_of_death&quot;        
##  [5] &quot;armed&quot;                   &quot;age&quot;                    
##  [7] &quot;gender&quot;                  &quot;race&quot;                   
##  [9] &quot;city&quot;                    &quot;state&quot;                  
## [11] &quot;signs_of_mental_illness&quot; &quot;threat_level&quot;           
## [13] &quot;flee&quot;                    &quot;body_camera&quot;            
## [15] &quot;longitude&quot;               &quot;latitude&quot;               
## [17] &quot;is_geocoding_exact&quot;</code></pre>
<p><em>The variable “body_camera” represents that news reports have indicated an officer was wearing a body camera and it may have recorded some portion of the incident. The variable “flee” represents if news reports have indicated the victim was moving away from officers, as well as if they were fleeing by car or by foot, or otherwise. The variable “armed” indicates that the victim was armed with some sort of implement that a police officer believed could inflict harm, as well as detailing what that implement was.</em></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>What are three weapons that you are surprised to find in the “armed” variable? Make a table of the values in “armed” to see the options.</li>
</ol>
<pre class="r"><code>table(dat$armed)</code></pre>
<pre><code>## 
##                                                   air conditioner 
##                              207                                1 
##                       air pistol                   Airsoft pistol 
##                                1                                3 
##                               ax                         barstool 
##                               24                                1 
##                     baseball bat          baseball bat and bottle 
##                               20                                1 
## baseball bat and fireplace poker           baseball bat and knife 
##                                1                                1 
##                            baton                           BB gun 
##                                6                               15 
##               BB gun and vehicle                     bean-bag gun 
##                                1                                1 
##                      beer bottle                       binoculars 
##                                3                                1 
##                     blunt object                           bottle 
##                                5                                1 
##                    bow and arrow                       box cutter 
##                                1                               13 
##                            brick              car, knife and mace 
##                                2                                1 
##                          carjack                            chain 
##                                1                                3 
##                        chain saw                         chainsaw 
##                                2                                1 
##                            chair              claimed to be armed 
##                                4                                1 
##               contractor&#39;s level                   cordless drill 
##                                1                                1 
##                         crossbow                          crowbar 
##                                9                                5 
##                        fireworks                         flagpole 
##                                1                                1 
##                       flashlight                      garden tool 
##                                2                                2 
##                      glass shard                          grenade 
##                                4                                1 
##                              gun                      gun and car 
##                             3798                               12 
##                    gun and knife                  gun and machete 
##                               22                                3 
##                    gun and sword                  gun and vehicle 
##                                1                               17 
##              guns and explosives                           hammer 
##                                3                               18 
##                       hand torch                          hatchet 
##                                1                               14 
##                  hatchet and gun                         ice pick 
##                                2                                1 
##                incendiary device                            knife 
##                                2                              955 
##                knife and vehicle                 lawn mower blade 
##                                1                                2 
##                          machete                  machete and gun 
##                               51                                1 
##                     meat cleaver                  metal hand tool 
##                                6                                2 
##                     metal object                       metal pipe 
##                                5                               16 
##                       metal pole                       metal rake 
##                                4                                1 
##                      metal stick                       microphone 
##                                3                                1 
##                       motorcycle                         nail gun 
##                                1                                1 
##                              oar                       pellet gun 
##                                1                                3 
##                              pen                     pepper spray 
##                                1                                2 
##                         pick-axe                    piece of wood 
##                                4                                7 
##                             pipe                        pitchfork 
##                                7                                2 
##                             pole                   pole and knife 
##                                3                                2 
##                  railroad spikes                             rock 
##                                1                                7 
##                    samurai sword                         scissors 
##                                4                                9 
##                      screwdriver                     sharp object 
##                               16                               14 
##                           shovel                            spear 
##                                7                                2 
##                          stapler              straight edge razor 
##                                1                                5 
##                            sword                            Taser 
##                               23                               34 
##                        tire iron                       toy weapon 
##                                4                              226 
##                          unarmed                     undetermined 
##                              421                              188 
##                   unknown weapon                          vehicle 
##                               82                              213 
##                  vehicle and gun              vehicle and machete 
##                                8                                1 
##                    walking stick                       wasp spray 
##                                1                                1 
##                           wrench 
##                                1</code></pre>
<p><em>Even though only one was reported, I was surprised to see a bean-bag gun because I have no idea what that is (but it sounds interesting). I was also surprised by the spear and railroad spike reports, especially because those weapons seem very difficult to obtain in the 21st Century.</em></p>
</div>
<div id="problem-2-10-points" class="section level3">
<h3>Problem 2 (10 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>Describe the age distribution of the sample. Is this what you would expect to see?</li>
</ol>
<pre class="r"><code>counts &lt;- table(dat$age)
hist(dat$age, main = &quot;Histogram of Age&quot;, xlab = &quot;Years&quot;, ylab = &quot;Frequency&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p><em>The sample of ages is skewed right, with the highest frequency of reported age being between 20 and 40 years. I would expect to see this distribution because I expect most people that the police find threatening (and would have used force against) would have to be an age where they would be physically capable of injuring an officer or other people.</em></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>To understand the center of the age distribution, would you use a mean or a median, and why? Find the one you picked.</li>
</ol>
<pre class="r"><code>summary(dat$age)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##    6.00   27.00   35.00   37.12   45.00   91.00     308</code></pre>
<p><em>Because our data is skewed, I would use a median to understand the center of the distribution, as a mean may be impacted by the data points that are on the right-hand side of the graph in a way that makes it seem like the center of the data is higher. This is demonstrated by our summary, where we can see that the median is 35.00, and the mean is 37.12. In this case, the median age is 35.00.</em></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Describe the gender distribution of the sample. Do you find this surprising?</li>
</ol>
<pre class="r"><code>counts &lt;- table(dat$gender)
barplot(counts, main = &quot;Gender Distribution&quot;, xlab = &quot;Gender&quot;,
    names = c(&quot;Female&quot;, &quot;Male&quot;, &quot;Unknown&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<pre class="r"><code>table(dat$gender)</code></pre>
<pre><code>## 
##         F    M 
##    3  293 6298</code></pre>
<pre class="r"><code>dat1 &lt;- dat[dat$gender != &quot;&quot;, ]
counts1 &lt;- table(dat1$gender)
barplot(counts1, main = &quot;Gender Distribution&quot;, xlab = &quot;Gender&quot;,
    names = c(&quot;Female&quot;, &quot;Male&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<p><em>It is clear from the first bar plot that most genders of individuals are unknown. However, if we remove the individuals with unknown gender, we can see that most victims were male. This is not surprising, as to my knowledge most people who are victims of homicide in general are male, and police are also more likely to perceive males as threatening, which may mean they are more likely to use force against them.</em></p>
</div>
<div id="problem-3-10-points" class="section level3">
<h3>Problem 3 (10 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>How many police officers had a body camera, according to news reports? What proportion is this of all the incidents in the data? Are you surprised that it is so high or low?</li>
</ol>
<pre class="r"><code>table(dat$body_camera)</code></pre>
<pre><code>## 
## False  True 
##  5684   910</code></pre>
<p><em>910 police had a body camera according to the news reports, and 5684 did not. Out of all incidents (6594), that would mean that only 13.8 percent of police had a body camera. I am not surprised that this is low, as body cameras are expensive, and also are only more recently becoming common. Given that this data collection started in 2015, it may just be the case that most police districts do not mandate body cameras or do not have the funding to provide body cameras to all of their police officers.</em></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>In how many of the incidents was the victim fleeing? What proportion is this of the total number of incidents in the data? Is this what you would expect?</li>
</ol>
<pre class="r"><code>table(dat$flee)</code></pre>
<pre><code>## 
##                     Car        Foot Not fleeing       Other 
##         491        1058         845        3952         248</code></pre>
<p><em>Because people were identified as fleeing both on foot and in a car, we can add 1058 and 845 to get a total number of incidents where the victim was fleeing: 1903. While only 3952 people were marked as not fleeing, there are unknown values, as well as values marked “Other” that we cannot determine if they were fleeing or not. So, the true number of people fleeing might be more than 1903, but we cannot tell what the other individuals did. The proportion of those who fled compared to overall reports (aka including the “Other” reports, not just compared to those who did not flee) is 28.9 percent. This is a bit higher than I was expecting, because normally, I associate police shootings with police officers claiming self-defense. However, almost 30% of people were fleeing the police officer at the time of the shooting, which seems like a very high number to me since police tend to claim that the victim was being aggressive and approaching them in a threatening way. However, it might make sense if police are trained to shoot individuals who are fleeing from a crime, but I don’t have any knowledge of if police officers are trained to shoot in those situations.</em></p>
</div>
<div id="problem-4-10-points---answer-only-one-of-these-a-or-b." class="section level3">
<h3>Problem 4 (10 points) - Answer only one of these (a or b).</h3>
<ol style="list-style-type: lower-alpha">
<li>Describe the relationship between the variables “body camera” and “flee” using a stacked barplot. What can you conclude from this relationship?</li>
</ol>
<p>Hint 1: The categories along the x-axis are the options for “flee”, each bar contains information about whether the police officer had a body camera (vertically), and the height along the y-axis shows the frequency of that category).</p>
<p>Hint 2: Also, if you are unsure about the syntax for barplot, run ?barplot in R and see some examples at the bottom of the documentation. This is usually a good way to look up the syntax of R code. You can also Google it.</p>
<pre class="r"><code>tab.sexor &lt;- table(dat$body_camera, dat$flee)
barplot(tab.sexor, main = &quot;Comparing Fleeing Victims to Body Cam Rates&quot;,
    xlab = &quot;Did the Victim Flee?&quot;, ylab = &quot;Frequency&quot;, legend.text = c(&quot;No Body Cam&quot;,
        &quot;Body Cam&quot;), xlim = c(0, 10), ylim = c(0, 5000), beside = FALSE)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<p><em>First, it is important to note that there were many incidents of police shootings where we are unsure if the victim fled or not, and those columns without a label or labeled “Other” are reflecting those incidents. Even though the “other” column might represent people who fled in a different way than by car or by foot, the codebook does not specify, so I will just consider those values to have unknown significance. Even though it is very clear that most police officers did not have body cameras, it looks like there is a higher level of body cameras involved in incidents where people don’t flee as compared to the incidents when people do flee (i.e. by car or by foot). We could conclude many things from this observation, one of which being that police are more likely to accurately report that the victim was not fleeing if there was video evidence. However, it may also be the case that in situations where police have to chase people who are fleeing, they are not wearing body cameras. Overall, I hesitate to conclude anything about the direct relationship between these variables, but I can say that it looks apparent that there was a higher rate of body cameras among the police officers that shot people who were not fleeing.</em></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Describe the relationship between age and race by using a boxplot. What can you conclude from this relationship?</li>
</ol>
<p>Hint 1: The categories along the x-axis are the race categories and the height along the y-axis is age.</p>
<p>Hint 2: Also, if you are unsure about the syntax for boxplot, run ?boxplot in R and see some examples at the bottom of the documentation. This is usually a good way to look up the syntax of R code. You can also Google it.</p>
<p><em>N/A.</em></p>
</div>
<div id="extra-credit-10-points" class="section level3">
<h3>Extra credit (10 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>What does this code tell us?</li>
</ol>
<pre class="r"><code>mydates &lt;- as.Date(dat$date)
head(mydates)
(mydates[length(mydates)] - mydates[1])
`?`(length)</code></pre>
<p><em>This code tells us a few things. The first line tells r not to evaluate this r chunk, which is helpful especially as this extra credit question is not involving the data that we are currently using for our other problems. The second line tells us to make a new data frame called mydates, and to interpret values from the date column in dat as calendar dates rather than normal character representations. The third line tells r to read the first few entries of the data frame mydates. The fourth line tells r to set the length of mydates to a certain value.</em></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>On Friday, a new report was published that was described as follows by The Guardian: “More than half of US police killings are mislabelled or not reported, study finds.” Without reading this article now (due to limited time), why do you think police killings might be mislabeled or underreported?</li>
</ol>
<p><em>The dataset we were given was only measuring the number and types of police killings that were both shootings as well as reported in the news. Because the Washington Post data that we used was only based on news reports, it is likely that there are many police killings that are not published in the news. Therefore, because it may be hard to access police reports in order to get a more complete idea of the incidents that happen, police killings may be underreported. Additionally, police shootings may be mislabeled because oftentimes police are the only people who have a complete record of what occured at a scene, and police are probably unwilling to accurately report what happened in order to avoid punitive measures. Especialy given that so many people do not have body cameras, police may be lying about what happened in order to avoid losing their job or other criminal implications.</em></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Regarding missing values in problem 4, do you see any? If so, do you think that’s all that’s missing from the data?</li>
</ol>
<p><em>For problem 4 I selected a barplot of flee and body-cameras. There were a bunch of missing values in the flee category, their flee status could have been in a way other than by car or by foot, and there were also people who simply did not have any value entered in the flee category. It is unlikley that that’s all that is missing from the data - because this data was collected from news articles, and not all news reporters are mandated to report on every single variable that the researchers were tracking, I am sure that there were other missing values. There were also unknown genders that we had to remove from the data set earlier in another problem, which indicates that there is absolutely more missing data in this set. Despite this fact, it is still good to collect this type of data so that we can analyze it.</em></p>
<hr />
</div>
</div>
<div id="assignment-3" class="section level1">
<h1>Assignment 3</h1>
<p><strong>Collaborators: Theodora Athanitis</strong>.</p>
<pre class="r"><code>knitr::opts_chunk$set(echo = TRUE)</code></pre>
<p>This assignment is due on Canvas on Wednesday 10/27/2021 before class, at 10:15 am. Include the name of anyone with whom you collaborated at the top of the assignment.</p>
<p>Submit your responses as either an HTML file or a PDF file on Canvas. Also, please upload it to your website.</p>
<p>Save the file (found on Canvas) crime_simple.txt to the same folder as this file (your Rmd file for Assignment 3).</p>
<p>Load the data.</p>
<pre class="r"><code>library(readr)
library(knitr)
dat.crime &lt;- read_delim(&quot;crime_simple.txt&quot;, delim = &quot;\t&quot;)</code></pre>
<pre><code>## Rows: 47 Columns: 14</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;\t&quot;
## dbl (14): R, Age, S, Ed, Ex0, Ex1, LF, M, N, NW, U1, U2, W, X</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>This is a dataset from a textbook by Brian S. Everitt about crime in the US in 1960. The data originates from the Uniform Crime Report of the FBI and other government sources. The data for 47 states of the USA are given.</p>
<p>Here is the codebook:</p>
<p>R: Crime rate: # of offenses reported to police per million population</p>
<p>Age: The number of males of age 14-24 per 1000 population</p>
<p>S: Indicator variable for Southern states (0 = No, 1 = Yes)</p>
<p>Ed: Mean of years of schooling x 10 for persons of age 25 or older</p>
<p>Ex0: 1960 per capita expenditure on police by state and local government</p>
<p>Ex1: 1959 per capita expenditure on police by state and local government</p>
<p>LF: Labor force participation rate per 1000 civilian urban males age 14-24</p>
<p>M: The number of males per 1000 females</p>
<p>N: State population size in hundred thousands</p>
<p>NW: The number of non-whites per 1000 population</p>
<p>U1: Unemployment rate of urban males per 1000 of age 14-24</p>
<p>U2: Unemployment rate of urban males per 1000 of age 35-39</p>
<p>W: Median value of transferable goods and assets or family income in tens of $</p>
<p>X: The number of families per 1000 earning below 1/2 the median income</p>
<p>We are interested in checking whether the reported crime rate (# of offenses reported to police per million population) and the average education (mean number of years of schooling for persons of age 25 or older) are related.</p>
<div id="section" class="section level3">
<h3>1.</h3>
<p>How many observations are there in the dataset? To what does each observation correspond?</p>
<pre class="r"><code>dim(dat.crime)</code></pre>
<pre><code>## [1] 47 14</code></pre>
<p><em>There are 47 observations in the dataset. Each observation corresponds with a state in the US.</em></p>
</div>
<div id="section-1" class="section level3">
<h3>2.</h3>
<p>Draw a scatterplot of the two variables. Calculate the correlation between the two variables. Can you come up with an explanation for this relationship?</p>
<pre class="r"><code>library(readr)
library(knitr)
plot(dat.crime$Ed, dat.crime$R, main = &quot;Relationship between Reported Crime Rate and Average Education&quot;,
    xlab = &quot;mean number of years of schooling for persons of age 25 or older&quot;,
    ylab = &quot;# of offenses reported to police per million population&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-45-1.png" width="576" /></p>
<pre class="r"><code>cor(dat.crime$Ed, dat.crime$R)</code></pre>
<pre><code>## [1] 0.3228349</code></pre>
<p><em>The correlation between these two variables is 0.3228349. This makes sense because there seems to be little relationship in the scatter plot between the two variables.</em></p>
</div>
<div id="section-2" class="section level3">
<h3>3.</h3>
<p>Regress reported crime rate (y) on average education (x) and call this linear model <code>crime.lm</code> and write the summary of the regression by using this code, which makes it look a little nicer <code>{r, eval=FALSE} kable(summary(crime.lm)$coef, digits = 2)</code>.</p>
<pre class="r"><code># Remember to remove eval=FALSE above!

crime.lm &lt;- lm(formula = R ~ Ed, data = dat.crime)
kable(summary(crime.lm)$coef, digits = 2)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-27.40</td>
<td align="right">51.81</td>
<td align="right">-0.53</td>
<td align="right">0.60</td>
</tr>
<tr class="even">
<td align="left">Ed</td>
<td align="right">1.12</td>
<td align="right">0.49</td>
<td align="right">2.29</td>
<td align="right">0.03</td>
</tr>
</tbody>
</table>
</div>
<div id="section-3" class="section level3">
<h3>4.</h3>
<p>Are the four assumptions of linear regression satisfied? To answer this, draw the relevant plots. (Write a maximum of one sentence per assumption.)</p>
<pre class="r"><code>plot(crime.lm, which = 1)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<p><em>Assumption 1: Linearity. This assumption is satisfied because the line representing average value of the residuals at each value of fitted value looks relatively flat.</em></p>
<pre class="r"><code>plot(dat.crime$Ed, crime.lm$residuals, ylim = c(-100, 100), main = &quot;Residuals vs. x&quot;,
    xlab = &quot;x, Average Ed&quot;, ylab = &quot;Residuals&quot;)
abline(h = 0, lty = &quot;dashed&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-49-1.png" width="672" /></p>
<p><em>Assumption 2: Independence. While there is no way to check this is true, based on our plots, this assumption is satisfied because there is no apparent patterns in the residuals plot.</em></p>
<pre class="r"><code>plot(crime.lm, which = 3)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-50-1.png" width="672" /></p>
<p><em>Assumption 3: Homoscedasticity. There appears to be no patterns in variability of x and y, and the scale-location plot above appears to have a relatively flat line.</em></p>
<pre class="r"><code>plot(crime.lm, which = 2)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-51-1.png" width="672" /></p>
<p><em>Assumption 4: Normal Population. The values in the top right and the shape of the QQ plot show that it may have a light tail, or may be smaller than usual for a normal distribution.</em></p>
</div>
<div id="section-4" class="section level3">
<h3>5.</h3>
<p>Is the relationship between reported crime and average education statistically significant? Report the estimated coefficient of the slope, the standard error, and the p-value. What does it mean for the relationship to be statistically significant?</p>
<pre class="r"><code>summary(crime.lm)</code></pre>
<pre><code>## 
## Call:
## lm(formula = R ~ Ed, data = dat.crime)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -60.061 -27.125  -4.654  17.133  91.646 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept) -27.3967    51.8104  -0.529   0.5996  
## Ed            1.1161     0.4878   2.288   0.0269 *
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 37.01 on 45 degrees of freedom
## Multiple R-squared:  0.1042, Adjusted R-squared:  0.08432 
## F-statistic: 5.236 on 1 and 45 DF,  p-value: 0.02688</code></pre>
<p><em>The estimated coefficient of slope is 1.1161. The Standard Error is 0.4878. The p-value is 0.0269. However, because of the QQ plot results, this significance result may be too strong compared to reality, so we should be cautious when saying that the relationship is statistically significant even though the p-value is less than .05. A relationship is statistically significant when the result is very unlikely to be due to chance; in this case, having these results is relatively unlikely if there is no correlation between R and Ed.</em></p>
</div>
<div id="section-5" class="section level3">
<h3>6.</h3>
<p>How are reported crime and average education related? In other words, for every unit increase in average education, how does reported crime rate change (per million) per state?</p>
<p><em>For every unit increase in average education, reported crime rate increases by 1.1161 (per million) per state.</em></p>
</div>
<div id="section-6" class="section level3">
<h3>7.</h3>
<p>Can you conclude that if individuals were to receive more education, then crime will be reported more often? Why or why not?</p>
<p><em>No. Just because these variables are correlated does not prove that one of them causes the other to occur. There may be causation in the reverse way, where crime being reported more often causes individuals to recieve more education, or there may be a third variable or condition that is causing both of them to change.</em></p>
</div>
</div>
<div id="assignment-4" class="section level1">
<h1>Assignment 4</h1>
<div id="section-7" class="section level3">
<h3>3</h3>
<pre class="r"><code># library(tidyverse)</code></pre>
<p><em>This chunk loads a bunch of different packages, including ggplot, that help make data look nicer, as well as helping access the datasets, help pages, and functions related to ggplot.</em></p>
<pre class="r"><code># install.packages(&#39;tidyverse&#39;) library(tidyverse)</code></pre>
<p><em>This chunk installs the tidyverse package which is what is described in the previous chunk.</em></p>
<pre class="r"><code>mpg</code></pre>
<pre><code>## # A tibble: 234 × 11
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto… f        18    29 p     comp…
##  2 audi         a4           1.8  1999     4 manu… f        21    29 p     comp…
##  3 audi         a4           2    2008     4 manu… f        20    31 p     comp…
##  4 audi         a4           2    2008     4 auto… f        21    30 p     comp…
##  5 audi         a4           2.8  1999     6 auto… f        16    26 p     comp…
##  6 audi         a4           2.8  1999     6 manu… f        18    26 p     comp…
##  7 audi         a4           3.1  2008     6 auto… f        18    27 p     comp…
##  8 audi         a4 quattro   1.8  1999     4 manu… 4        18    26 p     comp…
##  9 audi         a4 quattro   1.8  1999     4 auto… 4        16    25 p     comp…
## 10 audi         a4 quattro   2    2008     4 manu… 4        20    28 p     comp…
## # … with 224 more rows</code></pre>
<p><em>This chunk is a sample dataframe from ggplot2, which contains observations collected by the US Environmental Protection Agency on 38 models of car.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p><em>This chunk plots mpg, and puts displ on the x-axis and hwy on the y-axis.</em></p>
<pre class="r"><code># ggplot(data = &lt;DATA&gt;) + &lt;GEOM_FUNCTION&gt;(mapping =
# aes(&lt;MAPPINGS&gt;))</code></pre>
<p><em>This chunk serves as a template for any future mapping that we do with ggplot. To make a plot, we would replace the bracketed sections in the code below with a dataset, a geom function, or a collection of mappings</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy,
    color = class))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p><em>This is an example of the template in use. In this case, by using the aesthetics feature of ggplot, we are allowing the car class to be displayed by color. The process of assigning a unique aesthetic is known as scaling.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy,
    size = class))</code></pre>
<pre><code>## Warning: Using size for a discrete variable is not advised.</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<pre class="r"><code># &gt; Warning: Using size for a discrete variable is not
# advised.</code></pre>
<p><em>This is an example of using aesthetics in a non-advisable way. In contrast with the example above, where color is used to mark the class of the car, size is used instead, prodiucing a very confusing output, especially given that “class” is a discrete variable.</em></p>
<pre class="r"><code># Left
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy,
    alpha = class))</code></pre>
<pre><code>## Warning: Using alpha for a discrete variable is not advised.</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<pre class="r"><code># Right
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy,
    shape = class))</code></pre>
<pre><code>## Warning: The shape palette can deal with a maximum of 6 discrete values because
## more than 6 becomes difficult to discriminate; you have 7. Consider
## specifying shapes manually if you must have them.</code></pre>
<pre><code>## Warning: Removed 62 rows containing missing values (geom_point).</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-60-2.png" width="672" /></p>
<p><em>This is yet another example of mapping aesthetics with GGplot. The first one maps class to the alpha aesthetic, which controls the transparency of the points, and the second one maps class to the shape aesthetic, which controls the shape of the points.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy),
    color = &quot;blue&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p><em>While we can use the aesthetics feature to convey information about different variables, we can also just change colors and shapes normally. The information within the aes function tells ggplot to use color, shape, size, etc. to give information about the data. Here, the instruction for color = blue is outside the aes function, allowing it to apply to all data points.</em></p>
<pre class="r"><code># ggplot(data = mpg)
#+ geom_point(mapping = aes(x = displ, y = hwy))</code></pre>
<p><em>This is an example of a mistake in ggplot. The + needs to come at the end of the first line, rather than at the beginning of the second line.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) +
    facet_wrap(~class, nrow = 2)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<p><em>In order to split our data into separate categories, we can use the facet function in ggplot, allowing you to plot different categories of data. This code tells ggplot to plot mpg with displ and hwy, but to split it up into different graphs based on one variable (class), and to have these graphs in 2 different rows.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) +
    facet_grid(drv ~ cyl)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
<p><em>This code tells ggplot to split the data visualization up based on two different variables. Just like the first facet function, this facet_grid will display data based on variables, but allows there to be a plot of two different variables that devide the data up between displays. This creates a grid, hence, facet_grid. The formula should contain two variable names separated by a ~</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = drv, y = cyl))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
<p><em>This code tells ggplot to create a scatterplot to display the relationship between drv and cyl.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) +
    facet_grid(drv ~ .)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) +
    facet_grid(. ~ cyl)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-66-2.png" width="672" /></p>
<p><em>These two code chunks demonstrate how to create facets specifically within rows and columns. Making a grid, and having the “.” as one of the variables, allows ggplot to make a 1xn or nx1 grid displaying the facets.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) +
    facet_wrap(~class, nrow = 2)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
<p><em>This code makes the class of car into the facet that ggplot will devide up the data based on. This mapping could be a better option compared to color aesthetic matching because it helps more clearly delineate patterns within car class, and with larger data sets, would avoid colors looking very similar to one another. It is just a more effective way of organizing.</em></p>
<pre class="r"><code># left
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-68-1.png" width="672" /></p>
<pre class="r"><code># right
ggplot(data = mpg) + geom_smooth(mapping = aes(x = displ, y = hwy))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-68-2.png" width="672" /></p>
<p><em>The first example is an example of code that maps a scatterplot with ggplot. The mapping instruction of geom_point tells ggplot to make a scatterplot. In the second example, that instruction is changed to geom_smooth, which makes a smooth line fitted to the data. They still both rely on x and y as their variables, but display the data in different ways.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_smooth(mapping = aes(x = displ, y = hwy,
    linetype = drv))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<p><em>This code is an example of how to correctly use aesthetics mapping for smooth line displays. If you wanted to change the shape of the points in the scatterpolot, you would set the shape within the aesthetics argument. However, within the geom_smooth function, you need to set the linetype, rather than trying to set the shape. This will draw a different line, with a different linetype, for each unique value of the variable given, here being drv.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_smooth(mapping = aes(x = displ, y = hwy))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg) + geom_smooth(mapping = aes(x = displ, y = hwy,
    group = drv))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-70-2.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg) + geom_smooth(mapping = aes(x = displ, y = hwy,
    color = drv), show.legend = FALSE)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-70-3.png" width="672" /></p>
<p><em>Here, there are three different plots. The first one just plots a smoothed line of x and y, the second plots smoothed lines of x and y for each aspect of the drv variable, and the third one makes each line based on the drv variable a different color. In order to do the second version, you use the grouping command within aesthetics, and the third one, you use the color command.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) +
    geom_smooth(mapping = aes(x = displ, y = hwy))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<p><em>By adding an additional line to this code, it tells ggplot to plot two geoms on the same plot. It is important to remember to add the + sign at the end of the first and second lines, rather than at the beginning of the line below. This is just plotting the scatterplot on top of the smoothed line plot.</em></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + geom_point() +
    geom_smooth()</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-72-1.png" width="672" /></p>
<p><em>This chunk is a more user-friendly way of doing the same thing in the last chunk. By adding the mapping and aesthetics instructions in the first line, we can automatically apply them to the second and third lines, which helps in case you want to copy the code and change the x or y axis - you would only have to change one line, rather than 2</em></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + geom_point(mapping = aes(color = class)) +
    geom_smooth()</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<p><em>If you want to map different aesthetics for differnt layers, we can still use the more user-friendly format, but this time, we can just add specifications in the second line if we want it to do something different from the rest of the aesthetic mapping, in this case, mapping the car class with color, but the smoothed line without.</em></p>
<pre class="r"><code># ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
# geom_point(mapping = aes(color = class)) +
# geom_smooth(data = filter(mpg, class == &#39;subcompact&#39;), se
# = #FALSE)</code></pre>
<p><em>Just like the case where we wanted to apply different aesthetics to the different layers of the ggplot, we can also apply different data within the lines which overrrides the instructions from the first line. The new, third line tells ggplot to add a smooth line, but only from data that is from the subcompact class of cars, which is determined using a filter function.</em></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +
    geom_point() + geom_smooth(se = FALSE)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +
    geom_point() + geom_smooth(se = FALSE)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
<p><em>This chunk tells ggplot to map displ as x and hwy as y, and to do aesthetics for drv with color. The following lines say that the scatterplot and the smoothed line can use the same aesthetics mapping instructions as the global code, and the se = FALSE just tells ggplot to only display the main line, not the error</em></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + geom_point() +
    geom_smooth()</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-77-1.png" width="672" /></p>
<pre class="r"><code>ggplot() + geom_point(data = mpg, mapping = aes(x = displ, y = hwy)) +
    geom_smooth(data = mpg, mapping = aes(x = displ, y = hwy))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-77-2.png" width="672" /></p>
<p><em>These two graphs are the same - the code may look different, but these are just different versions of the same instructions.</em></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-78-1.png" width="672" /></p>
<p><em>This is how to create a bar chart in ggplot. The data is from a new datasource about diamonds, and the aesthetics mapping is telling ggplot to put the cut of the diamond on the x axis, with the count on they y axis</em></p>
<pre class="r"><code>ggplot(data = diamonds) + stat_count(mapping = aes(x = cut))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
<p><em>Because ggplot, in order to make a barplot, has to make a table of all of the values for a certian vareuable in a dataset, it is easy to just ask ggplot to make a stat_count representation, which will give you the same output as the geom_bar. This is because they require the same steps to reach their final end goal, which is displaying computed variables i.e. the count of each type of cut.</em></p>
<pre class="r"><code># demo &lt;- tribble( ~cut, ~freq, &#39;Fair&#39;, 1610, &#39;Good&#39;, 4906,
# &#39;Very Good&#39;, 12082, &#39;Premium&#39;, 13791, &#39;Ideal&#39;, 21551 )

# ggplot(data = demo) + geom_bar(mapping = aes(x = cut, y =
# freq), stat = &#39;identity&#39;)</code></pre>
<p><em>This chunk overrides the default pairing between stat and geom that we had relied on in the previous two chunks. This means that instead of measuring the cut based on the number of times that cut appears, it could be measured by some other factor. In this case, we are using identity.</em></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut, y = stat(prop),
    group = 1))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<p><em>This allows us to display a bar chart of a proportion instead of a count of the number of occurrences of cut.</em></p>
<pre class="r"><code>ggplot(data = diamonds) + stat_summary(mapping = aes(x = cut,
    y = depth), fun.min = min, fun.max = max, fun = median)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
<p><em>This plot more accurately describes the spread of y values for any variable x, allowing us to see the min, max, and median of all of the groupings.</em></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut, y = after_stat(prop)))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut, fill = color,
    y = after_stat(prop)))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-83-2.png" width="672" /></p>
<p><em>The problem with these two graphs is that it doesn’t specify the group, which makes each bar graph full, as it will not correctly display the proportion otherwise.</em></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut, colour = cut))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut, fill = cut))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-84-2.png" width="672" /></p>
<p><em>This plot tells ggplot to put cut on the x axis, as well as color based on the variable cut. This means that each different bar will be colored differently, as cit is the same variable for both x and color.</em></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut, fill = clarity))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
<p><em>Unlike the example above, we can split the bar graphs between multiple variables. This tells ggplot to put cut on the x axis, but also, to fill each of the cut bars with colors based on the number of any given clarity within that cut, creating a stacked barplot.</em></p>
<pre class="r"><code>ggplot(data = diamonds, mapping = aes(x = cut, fill = clarity)) +
    geom_bar(alpha = 1/5, position = &quot;identity&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-86-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = diamonds, mapping = aes(x = cut, colour = clarity)) +
    geom_bar(fill = NA, position = &quot;identity&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-86-2.png" width="672" /></p>
<p><em>These are the instructions if you do not want the barplots to be stacked, and wish to have each of the clarity types to be displayed on the numerical context of the graph.</em></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut, fill = clarity),
    position = &quot;fill&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
<p><em>This makes each set of bars the same height in order to ensure that you can compare across subgroups within x, in this case, clarity.</em></p>
<pre class="r"><code>ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut, fill = clarity),
    position = &quot;dodge&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
<p><em>This puts the subvariable analysis in side-by-side bars, which are then grouped based on the initial x variable, in this case, clarity and cut respectively.</em></p>
<pre class="r"><code>ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy),
    position = &quot;jitter&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-89-1.png" width="672" /></p>
<p><em>The jitter function adds slight ammounts of random noise to each point in a scatterplot to avoid overplotting.</em></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + geom_point()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-90-1.png" width="672" /></p>
<p><em>This plot could be improved by adding jitter, which would make it more clear where the data actually is.</em></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = class, y = hwy)) + geom_boxplot()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-91-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = class, y = hwy)) + geom_boxplot() +
    coord_flip()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-91-2.png" width="672" /></p>
<p><em>Adding the coordinate flip function at the bottom allows us to flip x and y when displaying data, which helps when there are long labels.</em></p>
<pre class="r"><code>nz &lt;- map_data(&quot;nz&quot;)

ggplot(nz, aes(long, lat, group = group)) + geom_polygon(fill = &quot;white&quot;,
    colour = &quot;black&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-92-1.png" width="672" /></p>
<pre class="r"><code>ggplot(nz, aes(long, lat, group = group)) + geom_polygon(fill = &quot;white&quot;,
    colour = &quot;black&quot;) + coord_quickmap()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-92-2.png" width="672" /></p>
<p><em>coord_quickmap() sets the correct aspect ratio for maps, which makes them appear more accurate to how they actually appear in real life.</em></p>
<pre class="r"><code>bar &lt;- ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut,
    fill = cut), show.legend = FALSE, width = 1) + theme(aspect.ratio = 1) +
    labs(x = NULL, y = NULL)

bar + coord_flip()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-93-1.png" width="672" /></p>
<pre class="r"><code>bar + coord_polar()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-93-2.png" width="672" /></p>
<p><em>This function uses polar coordinates instead of the normal coordinates.</em></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + geom_point() +
    geom_abline() + coord_fixed()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-94-1.png" width="672" /></p>
<p><em>This fixes the aspect ratio as well as putting a reference line</em></p>
<pre class="r"><code># ggplot(data = &lt;DATA&gt;) + &lt;GEOM_FUNCTION&gt;( mapping =
# aes(&lt;MAPPINGS&gt;), stat = &lt;STAT&gt;, position = &lt;POSITION&gt; ) +
# &lt;COORDINATE_FUNCTION&gt; + &lt;FACET_FUNCTION&gt;</code></pre>
<p><em>This is the final code template that we have produced after learning more ggplot functions.</em></p>
</div>
<div id="section-8" class="section level3">
<h3>28</h3>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) + geom_point(aes(color = class)) +
    geom_smooth(se = FALSE) + labs(title = &quot;Fuel efficiency generally decreases with engine size&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-96-1.png" width="672" /></p>
<p><em>This addition adds labels to the plot, specificially in this instance, a title.</em></p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) + geom_point(aes(color = class)) +
    geom_smooth(se = FALSE) + labs(title = &quot;Fuel efficiency generally decreases with engine size&quot;,
    subtitle = &quot;Two seaters (sports cars) are an exception because of their light weight&quot;,
    caption = &quot;Data from fueleconomy.gov&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
<p><em>Here are some examples of more labels that you can add, such as a title, subtitle, and a caption.</em></p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) + geom_point(aes(colour = class)) +
    geom_smooth(se = FALSE) + labs(x = &quot;Engine displacement (L)&quot;,
    y = &quot;Highway fuel economy (mpg)&quot;, colour = &quot;Car type&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
<p><em>This describes how to use the labels command to input x and y axes, as well as how to change the key description. In this instance, because there is a key for the color aesthetics map, we were able to label it.</em></p>
<pre class="r"><code># df &lt;- tibble( x = runif(10), y = runif(10) ) ggplot(df,
# aes(x, y)) + geom_point() + labs( x = quote(sum(x[i] ^ 2,
# i == 1, n)), y = quote(alpha + beta + frac(delta, theta))
# )</code></pre>
<p><em>This chunk is an example of how to use mathematical functions in ggplot as compared to text. In this case, you would switch the word “quote()” with actual quotations, and ggplot would be able to read the function as you had inputted it.</em></p>
<pre class="r"><code># best_in_class &lt;- mpg %&gt;% group_by(class) %&gt;%
# filter(row_number(desc(hwy)) == 1) ggplot(mpg, aes(displ,
# hwy)) + geom_point(aes(colour = class)) +
# geom_text(aes(label = model), data = best_in_class)</code></pre>
<p><em>This chunk demonstrates how to label specific data points within the graph. Specifically, we can look at the best_in_class fearture, and label each car within that category on the larger graph.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point(aes(colour =
# class)) + geom_label(aes(label = model), data =
# best_in_class, nudge_y = 2, alpha = 0.5)</code></pre>
<p><em>As you can observe with the previous graph, some of the labels are hard to read. This can be solved by using geom_label instead of geom_text, as the labeling function adds a small rectangle behidn the text, making it easier to read.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point(aes(colour =
# class)) + geom_point(size = 3, shape = 1, data =
# best_in_class) + ggrepel::geom_label_repel(aes(label =
# model), data = #best_in_class)</code></pre>
<p><em>However, even though we have added rectangles, some of the labels still overlap. If we use ggrepel, the labels will automatically be spaced out from each other.</em></p>
<pre class="r"><code># class_avg &lt;- mpg %&gt;% group_by(class) %&gt;% summarise( displ
# = median(displ), hwy = median(hwy) ) ggplot(mpg,
# aes(displ, hwy, colour = class)) +
# ggrepel::geom_label_repel(aes(label = class), data =
# class_avg, size = 6, label.size = 0, segment.color = NA )
# + geom_point() + theme(legend.position = &#39;none&#39;)</code></pre>
<p><em>In another way to label certain points, you can display class names with this code, and then get rid of the legend by saying legend.position = “none”.</em></p>
<pre class="r"><code># label &lt;- mpg %&gt;% summarise( displ = max(displ), hwy =
# max(hwy), label = &#39;Increasing engine size is \nrelated to
# decreasing fuel economy.&#39;  )

# ggplot(mpg, aes(displ, hwy)) + geom_point() +
# geom_text(aes(label = label), data = label, vjust =
# &#39;top&#39;, #hjust = &#39;right&#39;)</code></pre>
<p><em>In the case that you only want one label for your graph, but you want the label to be in a specific location, you will need to add another data frame to tell the label where to go. In this case, we can use the summarize function to retrieve the max x and y values, and then to instruct the ggplot to located the new label with those maximum values, putting it in the top right.</em></p>
<pre class="r"><code># label &lt;- tibble( displ = Inf, hwy = Inf, label =
# &#39;Increasing engine size is \nrelated to decreasing #fuel
# economy.&#39; ) ggplot(mpg, aes(displ, hwy)) + geom_point() +
# geom_text(aes(label = label), data = label, vjust =
# &#39;top&#39;, #hjust = &#39;right&#39;)</code></pre>
<p><em>In the case that you only want one label for your graph, but you want the label to be in a specific location, you will need to add another data frame to tell the label where to go. With the Inf in the code, we can make sure that the labels are precisely aligned with the graph, rather than the data.</em></p>
<pre class="r"><code>#&#39;Increasing engine size is related to decreasing fuel economy.&#39; %&gt;%
# stringr::str_wrap(width = 40) %&gt;% writeLines() &gt;
# Increasing engine size is related to &gt; decreasing fuel
# economy.</code></pre>
<p><em>This is just a way to wrap your label so that the lines do not exceed a certain amount.In this case, that amount was 40 characters.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point(aes(colour =
# class))

# ggplot(mpg, aes(displ, hwy)) + geom_point(aes(colour =
# class)) + scale_x_continuous() + scale_y_continuous() +
# scale_colour_discrete()</code></pre>
<p><em>Because ggplot automatically scales data, if we are looking for the data to be scaled manually, we will need to utilize the functions included here. These specifications can change the color scale, as well as the x and y scale.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point() +
# scale_y_continuous(breaks = seq(15, 40, by = 5))</code></pre>
<p><em>This scale function creates labels, or ticks, every value of 5. This funciton also tells ggplot to start the coount at 15, and keep lableing by 5 up until 40.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point() +
# scale_x_continuous(labels = NULL) +
# scale_y_continuous(labels = NULL)</code></pre>
<p><em>If you want to override the default labeling or scaling, for example, to protect true data values, you can set the scaling to NULL, which will create a plot without x or y numerical labeling.</em></p>
<pre class="r"><code># presidential %&gt;% mutate(id = 33 + row_number()) %&gt;%
# ggplot(aes(start, id)) + geom_point() +
# geom_segment(aes(xend = end, yend = id)) +
# scale_x_date(NULL, breaks = presidential$start,
# date_labels = &#39;&#39;%y&#39;)</code></pre>
<p><em>This display marks exactly where observations occur. In this instance, it describes how old US presidents are at the beginning of their term, and the breaks function can demonstrate that there were gaps in time between each start of a presidential term.</em></p>
<pre class="r"><code># base &lt;- ggplot(mpg, aes(displ, hwy)) +
# geom_point(aes(colour = class))

# base + theme(legend.position = &#39;left&#39;) base +
# theme(legend.position = &#39;top&#39;) base +
# theme(legend.position = &#39;bottom&#39;) base +
# theme(legend.position = &#39;right&#39;) # the default</code></pre>
<p><em>This code tells ggplot where to locate the legend, and indicates that it is by default to the right of the plot.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point(aes(colour =
# class)) + geom_smooth(se = FALSE) + theme(legend.position
# = &#39;bottom&#39;) + guides(colour = guide_legend(nrow = 1,
# override.aes = list(size = 4))) &gt; `geom_smooth()` using
# method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><em>If you want more detail for how to control the legend, you can use this chunk of code. For example, controlling the number of rows the legend uses with nrow, and overriding one of the aesthetics to make the points bigger. </em></p>
<pre class="r"><code># ggplot(diamonds, aes(carat, price)) + geom_bin2d()

# ggplot(diamonds, aes(log10(carat), log10(price))) +
# geom_bin2d()

# ggplot(diamonds, aes(carat, price)) + geom_bin2d() +
# scale_x_log10() + scale_y_log10()</code></pre>
<p><em>The final lines of code show how to plot the initial y axis with data that has been transformed. Because we transformed the diamond data, it is now difficult to properly interpret the default labels and scaling for the y axis, so we can also transform the scale of the axes in order to maintain the initial labels.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point(aes(color =
# drv))

# ggplot(mpg, aes(displ, hwy)) + geom_point(aes(color =
# drv)) + scale_colour_brewer(palette = &#39;Set1&#39;)</code></pre>
<p><em>This provides an example of how to change the color pallet of the colors in a plot, specifically to help those with red-green colorblindness.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point(aes(color =
# drv, shape = drv)) + scale_colour_brewer(palette =
# &#39;Set1&#39;)</code></pre>
<p><em>Another way to make color aesthetics mapping more easily interpreted is to add redundant shapes coding, which could also help if the graphs are eventually printed in black and white.</em></p>
<pre class="r"><code># presidential %&gt;% mutate(id = 33 + row_number()) %&gt;%
# ggplot(aes(start, id, colour = party)) + geom_point() +
# geom_segment(aes(xend = end, yend = id)) +
# scale_colour_manual(values = c(Republican = &#39;red&#39;,
# Democratic = &#39;blue&#39;))</code></pre>
<p><em>If we have pre-determined colors that we wish to use for certain values, we can pre-set them. In this case, we are able to set red and blue for Republican and Democratic, respectively. This is done using scale_colour_manual()</em></p>
<pre class="r"><code># df &lt;- tibble( x = rnorm(10000), y = rnorm(10000) )
# ggplot(df, aes(x, y)) + geom_hex() + coord_fixed()
# ggplot(df, aes(x, y)) + geom_hex() +
# viridis::scale_fill_viridis() + coord_fixed()</code></pre>
<p><em>Using the viridis scale for color mapping can result in more aesthetically pleasing color schemes.</em></p>
<pre class="r"><code># ggplot(df, aes(x, y)) + geom_hex() +
# scale_colour_gradient(low = &#39;white&#39;, high = &#39;red&#39;) +
# coord_fixed()</code></pre>
<p><em>This code did not overwrite the default because we did not give a new scale. aka: no values = c()</em></p>
<pre class="r"><code># ggplot(mpg, mapping = aes(displ, hwy)) +
# geom_point(aes(color = class)) + geom_smooth() +
# coord_cartesian(xlim = c(5, 7), ylim = c(10, 30))

# mpg %&gt;% filter(displ &gt;= 5, displ &lt;= 7, hwy &gt;= 10, hwy &lt;=
# 30) %&gt;% ggplot(aes(displ, hwy)) + geom_point(aes(color =
# class)) + geom_smooth()</code></pre>
<p><em>In these two plots, we are controlling the plot limits differently. In the first, we are using the coord_cartesian command, which allows us to select x and y limits and effectively zoom in on some of the data. In the second, we are using a filter to display only certain data values. This may result in different looking graphs based on where our data is located.</em></p>
<pre class="r"><code># suv &lt;- mpg %&gt;% filter(class == &#39;suv&#39;) compact &lt;- mpg %&gt;%
# filter(class == &#39;compact&#39;)

# ggplot(suv, aes(displ, hwy, colour = drv)) + geom_point()

# ggplot(compact, aes(displ, hwy, colour = drv)) +
# geom_point()

# x_scale &lt;- scale_x_continuous(limits = range(mpg$displ))
# y_scale &lt;- scale_y_continuous(limits = range(mpg$hwy))
# col_scale &lt;- scale_colour_discrete(limits =
# unique(mpg$drv))

# ggplot(suv, aes(displ, hwy, colour = drv)) + geom_point()
# + x_scale + y_scale + col_scale

# ggplot(compact, aes(displ, hwy, colour = drv)) +
# geom_point() + x_scale + y_scale + col_scale</code></pre>
<p><em>The first set of code demonstrates how the graphs, when compared, can be misleading if they are not scaled on the same axis. Using the x and y and col scales, we can fix this issue, and using the limits of the full data, we can clearly see how they compare.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point(aes(color =
# class)) + geom_smooth(se = FALSE) + theme_bw()</code></pre>
<p><em>In displaying our graphs and charts, we can change the default color schemes and background of the entire thing by using this code. It is also worth mentioning that without any edits, the default will mean a grey background, so if you want to change this in your data, you will have to specify theme_bw() and then denote your desired theme.</em></p>
<pre class="r"><code># ggplot(mpg, aes(displ, hwy)) + geom_point()
# ggsave(&#39;my-plot.pdf&#39;) &gt; Saving 7 x 4.33 in image</code></pre>
<p><em>These lines describe how to save my plots.</em></p>
<p><span class="math display">\[\\[2in]\]</span></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
